steps:
  - id: clone-problems
    name:	gcr.io/cloud-builders/git
    volumes:
    - name: library-checker-problems
      path: /library-checker-problems
    dir: ../library-checker-problems
    args:
      - clone
      - https://github.com/yosupo06/library-checker-problems/
  - id: test2
    name:	gcr.io/cloud-builders/gcloud
    volumes:
    - name: library-checker-problems
      path: /library-checker-problems
    entrypoint: bash
    dir: /
    args:
      - '-c'
      - pwd
  - id: test3
    name:	gcr.io/cloud-builders/gcloud
    volumes:
    - name: library-checker-problems
      path: /library-checker-problems
    entrypoint: bash
    dir: /
    args:
      - '-c'
      - 'ls -al library-checker-problems'
  - id: test
    name:	gcr.io/cloud-builders/gcloud
    volumes:
    - name: library-checker-problems
      path: /library-checker-problems
    entrypoint: bash
    dir: test
    args:
      - './gce_test.sh'
    env:
      - 'TEST_COMMIT=$COMMIT_SHA'

timeout: 4800s
